<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <title>Room Details</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f5f5f5; margin: 0; padding: 0; }
        .menu { display: flex; gap: 15px; justify-content: flex-end; background-color: #343a40; padding: 10px; }
        .menu a { color: white; text-decoration: none; font-weight: bold; padding: 8px 12px; }
        .container { display: flex; gap: 30px; margin: 40px; background: white; padding: 20px; border-radius: 10px; }
        .image-container { position: relative; width: 50%; height: 400px; }
        .room-image { width: 100%; height: 100%; object-fit: cover; border-radius: 10px; }
        .nav-button { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0, 0, 0, 0.5); color: white; padding: 10px; border-radius: 50%; cursor: pointer; }
        .prev { left: 10px; }
        .next { right: 10px; }
        .room-info { width: 50%; }
        h3 { font-size: 26px; color: #333; }
        .btn { display: inline-block; padding: 12px 18px; background: #00bcd4; color: white; border-radius: 5px; }
        .btn:hover { background: #008c9e; }
        .user-review { display: flex; align-items: center; gap: 10px; background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 10px; }
        .user-review img { width: 40px; height: 40px; border-radius: 50%; }
    </style>
</head>
<body>
<div class="header">
    <div class="menu">
        <a href="#">Home</a>
        <a href="#">Rooms</a>
        <a href="#">About Us</a>
        <a href="#">Pages</a>
        <a href="#">News</a>
        <a href="#">Contact</a>
    </div>
</div>

<div class="container">
    <div class="image-container">
        <button class="nav-button prev" onclick="prevImage()">&#10094;</button>
        <img alt="Room Image" class="room-image" id="room-image" th:src="${room.images[0]?.imageName ?: 'default.jpg'}">
        <button class="nav-button next" onclick="nextImage()">&#10095;</button>
    </div>

    <div class="room-info">
        <h3>Room Details</h3>
        <p><strong>Room Name:</strong> <span th:text="${room.name}"></span></p>
        <p><strong>Hotel:</strong> <span th:text="${room.hotel.name}"></span></p>
        <p><strong>Address:</strong> <span th:text="${room.hotel.address}"></span></p>
        <p><strong>Rating:</strong> <span th:text="${room.hotel.rating}"></span></p>
        <p><strong>Price:</strong> <span th:text="${#numbers.formatCurrency(room.price)}"></span> /night</p>
        <a class="btn" href="#">Booking Now</a>
    </div>
</div>

<div class="container">
    <div class="reviews">
        <h3>Reviews</h3>
        <div class="user-review" th:each="review : ${room.reviews}">
            <img alt="User Image" th:src="${review.user.avatar ?: 'default-avatar.png'}">
            <div>
                <p><strong th:text="${review.user.name}"></strong> - <span
                        th:text="${#dates.format(review.date, 'dd MMM yyyy')}"></span></p>
                <p th:text="${review.content}"></p>
            </div>
        </div>
    </div>
</div>

<script>
    let images = /*[[${room.images != null ? room.images.![imageName] : []}]]*/ [];
    let currentIndex = 0;
    let imageElement = document.getElementById("room-image");

    function prevImage() {
        if (images.length > 0) {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            imageElement.src = images[currentIndex];
        }
    }

    function nextImage() {
        if (images.length > 0) {
            currentIndex = (currentIndex + 1) % images.length;
            imageElement.src = images[currentIndex];
        }
    }
</script>
</body>
</html>
